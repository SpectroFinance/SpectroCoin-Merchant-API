<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Spectro Coin Merchant API : ">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Spectro Coin Merchant API</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/SpectroFinance/SpectroCoin-Merchant-API">View on GitHub</a>

          <h1 id="project_title">Spectro Coin Merchant API</h1>
          <h2 id="project_tagline"></h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/SpectroFinance/SpectroCoin-Merchant-API/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/SpectroFinance/SpectroCoin-Merchant-API/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a name="spectrocoin-merchant-api" class="anchor" href="#spectrocoin-merchant-api"><span class="octicon octicon-link"></span></a>SpectroCoin Merchant API</h1>

<p>This document describes <a href="https://spectrocoin.com">Spectro Coin</a> merchant service API specification.</p>

<h1>
<a name="contents" class="anchor" href="#contents"><span class="octicon octicon-link"></span></a>Contents</h1>

<ul>
<li><a href="#requirements">Requirements</a></li>
<li><a href="#api">API</a></li>
<li><a href="#merchant-key-pair">Merchant key pair</a></li>
<li><a href="#signature">Signature</a></li>
<li><a href="#example-applications">Example applications</a></li>
</ul><h1>
<a name="requirements" class="anchor" href="#requirements"><span class="octicon octicon-link"></span></a>Requirements</h1>

<ul>
<li>Must have a SpectroCoin account (<a href="https://spectrocoin.com/en/signup.html">Sign Up!</a>) to setup and test API. For merchant API usage in production you must approve your account.</li>
<li>Must <a href="#merchant-key-pair">generate</a> private and public key pairs.</li>
<li>Must setup merchant API instance on Spectro Coin API configuration page.</li>
</ul><h1>
<a name="api" class="anchor" href="#api"><span class="octicon octicon-link"></span></a>API</h1>

<ul>
<li><a href="https://spectrocoin.com/api/">Interactive SpectroCoin merchant API operation list</a></li>
<li><a href="https://spectrocoin.com/api/merchant/1/">Root Merchant REST based API address</a></li>
</ul><h2>
<a name="createorder" class="anchor" href="#createorder"><span class="octicon octicon-link"></span></a>/createOrder</h2>

<p>Merchant who wants his customer order to be paid creates order at Spectro Coin with payment details and presents result to his customer. Merchant can also redirect his customer to returned redirect url where customer will be presented with interactive payment window.</p>

<h3>
<a name="request" class="anchor" href="#request"><span class="octicon octicon-link"></span></a>Request</h3>

<p>Request URL: <a href="https://spectrocoin.com/api/merchant/1/createOrder">https://spectrocoin.com/api/merchant/1/createOrder</a></p>

<p>For this method server accept only <strong>POST</strong> of <strong>"application/x-www-form-urlencoded"</strong> media type.</p>

<table>
<thead><tr>
<th>Seq No.</th>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Example</th>
</tr></thead>
<tbody>
<tr>
<td>1.</td>
<td>merchantId</td>
<td>Long</td>
<td>+</td>
<td>12345</td>
</tr>
<tr>
<td>2.</td>
<td>apiId</td>
<td>Long</td>
<td>+</td>
<td>1</td>
</tr>
<tr>
<td>3.</td>
<td>orderId</td>
<td>String</td>
<td>-</td>
<td>ABC001, Must be unique for all merchant API orders. If not provided, order request id will be assigned</td>
</tr>
<tr>
<td>4.</td>
<td>payCurrency</td>
<td>String</td>
<td>+</td>
<td>BTC</td>
</tr>
<tr>
<td>5.</td>
<td>payAmount</td>
<td>Double</td>
<td>+ or receiveAmount</td>
<td>123.45, 1.23456789 (BTC)</td>
</tr>
<tr>
<td>6.</td>
<td>receiveAmount</td>
<td>Double</td>
<td>+ or payAmount</td>
<td>123.45, 1.23456789 (BTC)</td>
</tr>
<tr>
<td>7.</td>
<td>description</td>
<td>String</td>
<td>-</td>
<td>Order ABC001 for User 123</td>
</tr>
<tr>
<td>8.</td>
<td>culture</td>
<td>String</td>
<td>-</td>
<td>Language for response ("en", "lt", "ru", "de")</td>
</tr>
<tr>
<td>9.</td>
<td>callbackUrl</td>
<td>String</td>
<td>-</td>
<td><a href="https://merchant.com/orderCallback?user=123">https://merchant.com/orderCallback?user=123</a></td>
</tr>
<tr>
<td>10.</td>
<td>successUrl</td>
<td>String</td>
<td>-</td>
<td><a href="https://merchant.com/success?user=123">https://merchant.com/success?user=123</a></td>
</tr>
<tr>
<td>11.</td>
<td>failureUrl</td>
<td>String</td>
<td>-</td>
<td><a href="https://merchant.com/failure?user=123">https://merchant.com/failure?user=123</a></td>
</tr>
<tr>
<td>12.</td>
<td>sign</td>
<td>String</td>
<td>+</td>
<td>Generated order request signature</td>
</tr>
</tbody>
</table><p>Example HTTP request:</p>

<div class="highlight highlight-http"><pre><span class="nf">POST</span> <span class="nn">https://spectrocoin.com/api/merchant/1/createOrder</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Accept-Encoding</span><span class="o">:</span> <span class="l">gzip,deflate</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/x-www-form-urlencoded</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">658</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">spectrocoin.com</span>
<span class="na">Connection</span><span class="o">:</span> <span class="l">Keep-Alive</span>

merchantId=169&amp;apiId=1&amp;orderId=Order%20123&amp;payCurrency=BTC&amp;payAmount=0.0&amp;receiveAmount=50.0&amp;description=My%20special%20order&amp;culture=en&amp;callbackUrl=https%3A%2F%2Fmerchan.com%2Fcallback&amp;successUrl=https%3A%2F%2Fmerchan.com%2Fsuccess&amp;failureUrl=https%3A%2F%2Fmerchan.com%2Ffailure&amp;sign=r6NuZ0JCBSAGCpPlYG5eXLkSRyOqSncWj8j7LfLIiiWeZdeH0Yy2nZ4Osn0JJY9cqWnoT%2Fvn%2B0KjY7f9tdYQjk67XTFY%2Bn1yg41FkzfbDxF8LQWYinLpnBBCf5AlFACJJ26yBHXMxsPFn67khxOV55AGRJeJcw03anH%2FobjevHiOGkV9%2BjTVLwV553U6Y9Ud995D66f45QpPR54IgBBDhA%2BHNlwockLcEyzCMbwMPs0pnsfVO65x0if8TJ2MtwTCa5c%2B%2FuCAq%2BoafTRV9%2Bd9meTRbC%2BFTDf%2FAMyU9SiltpdIqoZPRypB7faBDZ5YVsQrRPIfD6Wy%2FtS6fb8MiFBnOw%3D%3D
</pre></div>

<h3>
<a name="response" class="anchor" href="#response"><span class="octicon octicon-link"></span></a>Response</h3>

<p><strong>JSON</strong> formatted response of complex object <code>Order</code>.</p>

<table>
<thead><tr>
<th>Field</th>
<th>Type</th>
<th>Example</th>
</tr></thead>
<tbody>
<tr>
<td>orderRequestId</td>
<td>Long</td>
<td>Order request id, Spectro Coin Id to track orders</td>
</tr>
<tr>
<td>orderId</td>
<td>String</td>
<td>ABC001</td>
</tr>
<tr>
<td>payCurrency</td>
<td>String</td>
<td>BTC</td>
</tr>
<tr>
<td>payAmount</td>
<td>Double</td>
<td>123.45, 1.23456789 (BTC)</td>
</tr>
<tr>
<td>receiveCurrency</td>
<td>String</td>
<td>BTC, EUR</td>
</tr>
<tr>
<td>receiveAmount</td>
<td>Double</td>
<td>123.45, 1.23456789 (BTC)</td>
</tr>
<tr>
<td>depositAddress</td>
<td>String</td>
<td>1HZcE7ZbwnEKHYcKkva1uZoxZbFvRyK3fm</td>
</tr>
<tr>
<td>redirectUrl</td>
<td>String</td>
<td><a href="https://spectrocoin.com/en/pay/order/18-5fD2HgMK.html">https://spectrocoin.com/en/pay/order/18-5fD2HgMK.html</a></td>
</tr>
<tr>
<td>validUntil</td>
<td>Long</td>
<td>Timestamp (how many milliseconds have passed since January 1, 1970, 00:00:00 GMT) until order is valid.</td>
</tr>
</tbody>
</table><div class="highlight highlight-json"><pre><span class="p">{</span>
<span class="nt">"depositAddress"</span><span class="p">:</span><span class="s2">"1HZcE7ZbwnEKHYcKkva1uZoxZbFvRyK3fm"</span><span class="p">,</span>
<span class="nt">"orderId"</span><span class="p">:</span><span class="s2">"18"</span><span class="p">,</span>
<span class="nt">"orderRequestId"</span><span class="p">:</span><span class="mi">18</span><span class="p">,</span>
<span class="nt">"payAmount"</span><span class="p">:</span><span class="mf">0.00246995</span><span class="p">,</span>
<span class="nt">"payCurrency"</span><span class="p">:</span><span class="s2">"BTC"</span><span class="p">,</span>
<span class="nt">"receiveAmount"</span><span class="p">:</span><span class="mf">1.0</span><span class="p">,</span>
<span class="nt">"receiveCurrency"</span><span class="p">:</span><span class="s2">"EUR"</span><span class="p">,</span>
<span class="nt">"redirectUrl"</span><span class="p">:</span><span class="s2">"https://spectrocoin.com/en/pay/order/18-5fD2HgMK.html"</span><span class="p">,</span>
<span class="nt">"validUntil"</span><span class="p">:</span><span class="mi">1401191587663</span>
<span class="p">}</span>
</pre></div>

<h3>
<a name="callback" class="anchor" href="#callback"><span class="octicon octicon-link"></span></a>Callback</h3>

<p><strong>POST</strong> request to merchant provided order callback url. Request provides information about current order status. Usually there will be several callbacks for a successful order (pending, paid).
Merchant page must return HTTP Response <strong>200</strong> with content: <strong>*ok*</strong> for Spectro Coin API to confirm callback as sent successfully.</p>

<p>Complex object <code>OrderCallback</code>.</p>

<table>
<thead><tr>
<th>Seq No.</th>
<th>Field</th>
<th>Type</th>
<th>Example</th>
</tr></thead>
<tbody>
<tr>
<td>1.</td>
<td>merchantId</td>
<td>Long</td>
<td>12345</td>
</tr>
<tr>
<td>2.</td>
<td>apiId</td>
<td>Long</td>
<td>1</td>
</tr>
<tr>
<td>3.</td>
<td>orderId</td>
<td>String</td>
<td>ABC001</td>
</tr>
<tr>
<td>4.</td>
<td>payCurrency</td>
<td>String</td>
<td>BTC</td>
</tr>
<tr>
<td>5.</td>
<td>payAmount</td>
<td>Double</td>
<td>123.45, 1.23456789 (BTC)</td>
</tr>
<tr>
<td>6.</td>
<td>receiveCurrency</td>
<td>String</td>
<td>BTC, EUR</td>
</tr>
<tr>
<td>7.</td>
<td>receiveAmount</td>
<td>Double</td>
<td>123.45, 1.23456789 (BTC)</td>
</tr>
<tr>
<td>8.</td>
<td>receivedAmount</td>
<td>Double</td>
<td>123.45, 1.23456789 (BTC)</td>
</tr>
<tr>
<td>9.</td>
<td>description</td>
<td>String</td>
<td>Order ABC001 for User 123</td>
</tr>
<tr>
<td>10.</td>
<td>orderRequestId</td>
<td>Long</td>
<td>Order request id, Spectro Coin Id to track orders</td>
</tr>
<tr>
<td>11.</td>
<td>status</td>
<td>Short</td>
<td>Order status</td>
</tr>
<tr>
<td>12.</td>
<td>sign</td>
<td>String</td>
<td>Generated order callback signature</td>
</tr>
</tbody>
</table><p>Order status table</p>

<table>
<thead><tr>
<th>Status Code</th>
<th>Order status</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr>
<td>1</td>
<td>New</td>
<td>Start state when order is registered in Spectro Coin system</td>
</tr>
<tr>
<td>2</td>
<td>Pending</td>
<td>Payment (or part of it) was received but still not confirmed</td>
</tr>
<tr>
<td>3</td>
<td>Paid</td>
<td>Order is complete</td>
</tr>
<tr>
<td>4</td>
<td>Failed</td>
<td>Some error occurred</td>
</tr>
<tr>
<td>5</td>
<td>Expired</td>
<td>Payment was not received in time</td>
</tr>
<tr>
<td>6</td>
<td>Test</td>
<td>Test order</td>
</tr>
</tbody>
</table><p>Example HTTP request:</p>

<div class="highlight highlight-http"><pre><span class="nf">POST</span> <span class="nn">https://merchant.com/callback</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Accept-Encoding</span><span class="o">:</span> <span class="l">gzip,deflate</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/x-www-form-urlencoded</span>
<span class="na">Content-Length</span><span class="o">:</span> <span class="l">578</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">merchant.com</span>
<span class="na">Connection</span><span class="o">:</span> <span class="l">Keep-Alive</span>

merchantId=169&amp;apiId=1&amp;orderId=Order%20123&amp;payCurrency=BTC&amp;payAmount=1.23456789&amp;receiveCurrency=EUR&amp;receiveAmount=50.0&amp;receivedAmount=0.0&amp;description=My%20special%20order&amp;orderRequestId=123&amp;status=1&amp;sign=r6NuZ0JCBSAGCpPlYG5eXLkSRyOqSncWj8j7LfLIiiWeZdeH0Yy2nZ4Osn0JJY9cqWnoT%2Fvn%2B0KjY7f9tdYQjk67XTFY%2Bn1yg41FkzfbDxF8LQWYinLpnBBCf5AlFACJJ26yBHXMxsPFn67khxOV55AGRJeJcw03anH%2FobjevHiOGkV9%2BjTVLwV553U6Y9Ud995D66f45QpPR54IgBBDhA%2BHNlwockLcEyzCMbwMPs0pnsfVO65x0if8TJ2MtwTCa5c%2B%2FuCAq%2BoafTRV9%2Bd9meTRbC%2BFTDf%2FAMyU9SiltpdIqoZPRypB7faBDZ5YVsQrRPIfD6Wy%2FtS6fb8MiFBnOw%3D%3D
</pre></div>

<h2>
<a name="error-result" class="anchor" href="#error-result"><span class="octicon octicon-link"></span></a>Error result</h2>

<p>When calling any of API operation, it may result and error.
Errors should be returned as <strong>JSON</strong> format on <strong>203</strong> http status code.</p>

<div class="highlight highlight-json"><pre><span class="p">[</span>
  <span class="p">{</span>
    <span class="nt">"code"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="nt">"message"</span><span class="p">:</span> <span class="s2">"apiId is required"</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="nt">"code"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="nt">"message"</span><span class="p">:</span> <span class="s2">"merchantId is required"</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>

<p>Error codes</p>

<table>
<thead><tr>
<th>Error code</th>
<th>Error message</th>
</tr></thead>
<tbody>
<tr>
<td>1</td>
<td>Validation errors</td>
</tr>
<tr>
<td>2</td>
<td>Bad signature</td>
</tr>
<tr>
<td>3</td>
<td>Not supported currency</td>
</tr>
<tr>
<td>4</td>
<td>Can't create order, please check your merchant account</td>
</tr>
<tr>
<td>5</td>
<td>Merchant order id exist</td>
</tr>
<tr>
<td>6</td>
<td>Check your merchantId and apiId</td>
</tr>
<tr>
<td>97</td>
<td>Unsupported Media Type</td>
</tr>
<tr>
<td>99</td>
<td>Please check your request</td>
</tr>
<tr>
<td>100</td>
<td>Unexpected error</td>
</tr>
</tbody>
</table><h1>
<a name="merchant-key-pair" class="anchor" href="#merchant-key-pair"><span class="octicon octicon-link"></span></a>Merchant key pair</h1>

<p>You should create key pair (private and public keys) (<a href="http://en.wikipedia.org/wiki/Public-key_cryptography">Wiki</a>) for your requests to be signed and validated by Spectro Coin.
<strong>Private key</strong> must be kept safely by merchant without any disclosure.
<strong>Public key</strong> must be inserted into configuration of specific Spectro Coin API (Create/Edit form of API details). This key will be used to check signature validity of any merchant API request signed by specific merchant and API.</p>

<h2>
<a name="generate-with-openssl" class="anchor" href="#generate-with-openssl"><span class="octicon octicon-link"></span></a>Generate with OpenSSL</h2>

<h3>
<a name="private-key-generation" class="anchor" href="#private-key-generation"><span class="octicon octicon-link"></span></a>Private key generation</h3>

<pre lang="shell"><code># generate a 2048-bit RSA private key
openssl genrsa -out "C:\private.pem" 2048

# convert private Key to PKCS#8 format (if you use Java)
openssl pkcs8 -topk8 -inform PEM -outform DER -in "C:\private.pem" -out "C:\private.der" -nocrypt
</code></pre>

<h3>
<a name="public-key-generation" class="anchor" href="#public-key-generation"><span class="octicon octicon-link"></span></a>Public key generation</h3>

<pre lang="shell"><code># output public key portion in PEM format
openssl rsa -in "C:\private.pem" -pubout -outform PEM -out "C:\public.pem"
</code></pre>

<h1>
<a name="signature" class="anchor" href="#signature"><span class="octicon octicon-link"></span></a>Signature</h1>

<p>All API requests must be signed with merchant private key so they can be validated with merchant public key (provided in API configuration). Some API request may result in callback from Spectro Coin, such request are also signed by Spectro Coin and must be validated by merchant using Spectro Coin public key.</p>

<p>Numbers must be formatted with <strong>0.0#######</strong> number format:</p>

<pre><code>null =&gt; 0.0
0 =&gt; 0.0
0.0 =&gt; 0.0
1.1 =&gt; 1.1
1.123 =&gt; 1.123
</code></pre>

<p>Example URL encoded concatenated parameters:</p>

<pre><code>merchantId=169&amp;apiId=1&amp;orderId=L254S&amp;payCurrency=BTC&amp;payAmount=0.0&amp;receiveAmount=20.0&amp;description=Some+string+with+symbols+%25%3D%26&amp;callbackUrl=http%3A%2F%2Ftestas.lt%2Fapi%2Fcheck
</code></pre>

<h2>
<a name="signing" class="anchor" href="#signing"><span class="octicon octicon-link"></span></a>Signing</h2>

<p>Request to be signed must be converted to <strong>UTF-8 URL encoded concatenated parameters</strong> of one string line including parameter names and ordered in specific sequence specified in documentation.
Signature must be <strong>Base64 encoded</strong>.</p>

<h3>
<a name="java-signing" class="anchor" href="#java-signing"><span class="octicon octicon-link"></span></a>Java signing</h3>

<div class="highlight highlight-java"><pre><span class="n">String</span> <span class="n">formValue</span> <span class="o">=</span> <span class="s">"merchantId=169&amp;apiId=1&amp;orderId=L254S&amp;payCurrency=BTC&amp;payAmount=0.0&amp;receiveAmount=20.0&amp;description=Some+string+with+symbols+%25%3D%26&amp;callbackUrl=http%3A%2F%2Ftestas.lt%2Fapi%2Fcheck"</span><span class="o">;</span>
<span class="n">Signature</span> <span class="n">ourSign</span> <span class="o">=</span> <span class="n">Signature</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="s">"SHA1withRSA"</span><span class="o">);</span>
<span class="n">ourSign</span><span class="o">.</span><span class="na">initSign</span><span class="o">(</span><span class="n">privateKey</span><span class="o">);</span>
<span class="n">ourSign</span><span class="o">.</span><span class="na">update</span><span class="o">(</span><span class="n">formValue</span><span class="o">.</span><span class="na">getBytes</span><span class="o">());</span>
<span class="k">return</span> <span class="k">new</span> <span class="nf">BASE64Encoder</span><span class="o">().</span><span class="na">encode</span><span class="o">(</span><span class="n">ourSign</span><span class="o">.</span><span class="na">sign</span><span class="o">());</span>
</pre></div>

<h3>
<a name="php-signing" class="anchor" href="#php-signing"><span class="octicon octicon-link"></span></a>PHP signing</h3>

<div class="highlight highlight-php"><pre><span class="nv">$data</span> <span class="o">=</span> <span class="s2">"merchantId=169&amp;apiId=1&amp;orderId=L254S&amp;payCurrency=BTC&amp;payAmount=0.0&amp;receiveAmount=20.0&amp;description=Some+string+with+symbols+%25%3D%26&amp;callbackUrl=http%3A%2F%2Ftestas.lt%2Fapi%2Fcheck"</span><span class="p">;</span>
<span class="c1">// fetch private key from file and ready it</span>
<span class="nv">$private_pem_key</span> <span class="o">=</span> <span class="nb">openssl_pkey_get_private</span><span class="p">(</span><span class="nv">$path_to_private_key</span><span class="p">);</span>
<span class="c1">// compute signature</span>
<span class="nb">openssl_sign</span><span class="p">(</span><span class="nv">$data</span><span class="p">,</span> <span class="nv">$signature</span><span class="p">,</span> <span class="nv">$private_pem_key</span><span class="p">,</span> <span class="nx">OPENSSL_ALGO_SHA1</span><span class="p">);</span>
<span class="nv">$encodedSignature</span> <span class="o">=</span> <span class="nb">base64_encode</span><span class="p">(</span><span class="nv">$signature</span><span class="p">);</span>
</pre></div>

<h2>
<a name="validating-callbacks" class="anchor" href="#validating-callbacks"><span class="octicon octicon-link"></span></a>Validating callbacks</h2>

<p>Requests coming from Spectro Coin to merchant pages are also signed. Merchant must validate signature of the request.
Request signature to be validated must be <strong>Base64 decoded</strong>.
Request must be converted to <strong>UTF-8 URL encoded concatenated parameters</strong> of one string line including parameter names and ordered in specific sequence specified in documentation.</p>

<h3>
<a name="java-validation" class="anchor" href="#java-validation"><span class="octicon octicon-link"></span></a>Java validation</h3>

<div class="highlight highlight-java"><pre><span class="n">String</span> <span class="n">parameters</span> <span class="o">=</span> <span class="s">"merchantId=25&amp;apiId=25&amp;orderId=L254S&amp;payCurrency=BTC&amp;payAmount=25.0&amp;receiveCurrency=EUR&amp;receiveAmount=245.0&amp;description=Some+sting+with+symbols+%25%3D%26&amp;orderRequestId=11&amp;status=1"</span><span class="o">;</span>
<span class="n">String</span> <span class="n">responseSign</span> <span class="o">=</span> <span class="s">"qGy2ablxcWtoGVAS2YufkYVWT0jLSilaUtMkz6Z8P6Mn6qInewEfK5Bsn4BFRxg1suENJJF8LJGyJV6vZt3XLmAHoTJwRjWLij2FROdFthuVt/U4Ima6uFm6hkjseeNLvJtdLFYWSAyKkt7wpeLPA2QUspQbG0asOhwd8EeP+mZDSfvOwTv2OFvGWcVEPR6DOWKEaw5wW6ilM8yZKowQzhrqoCUyJN4pxK02PLTKGIb6YDu1nESrN6ebp7ugskYwcmynLWNOY8Tu1bdg0fWBF2uCgJkWpc9yy2UYbtpVO7sCjIe+dmojJzqCwS5/7Ny04Mf+ouj6oEchxHfUq7VpaA=="</span><span class="o">;</span>
<span class="n">Signature</span> <span class="n">verifier</span> <span class="o">=</span> <span class="n">Signature</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="s">"SHA1withRSA"</span><span class="o">);</span>
<span class="n">verifier</span><span class="o">.</span><span class="na">initVerify</span><span class="o">(</span><span class="n">publicKey</span><span class="o">);</span>
<span class="n">verifier</span><span class="o">.</span><span class="na">update</span><span class="o">(</span><span class="n">parameters</span><span class="o">.</span><span class="na">getBytes</span><span class="o">());</span>
<span class="kt">byte</span><span class="o">[]</span> <span class="n">bytes</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">BASE64Decoder</span><span class="o">().</span><span class="na">decodeBuffer</span><span class="o">(</span><span class="n">responseSign</span><span class="o">);</span>
<span class="k">return</span> <span class="n">verifier</span><span class="o">.</span><span class="na">verify</span><span class="o">(</span><span class="n">bytes</span><span class="o">);</span>
</pre></div>

<h3>
<a name="php-validation" class="anchor" href="#php-validation"><span class="octicon octicon-link"></span></a>PHP validation</h3>

<div class="highlight highlight-php"><pre><span class="nv">$data</span> <span class="o">=</span> <span class="s2">"merchantId=25&amp;apiId=25&amp;orderId=L254S&amp;payCurrency=BTC&amp;payAmount=25.0&amp;receiveCurrency=EUR&amp;receiveAmount=245.0&amp;description=Some+sting+with+symbols+%25%3D%26&amp;orderRequestId=11&amp;status=1"</span><span class="p">;</span>
<span class="nv">$encodedSignature</span> <span class="o">=</span> <span class="s2">"QKpoaBL/P2tcFttFm/TVcn0utkgaOzEAOsZbSSOa+zntcxyJUijaM5egewRoRu68d4CoswTpkdOqaKdGrLWPNqQGujPHIX3q8Q0lK/C8GqN7MYHFrLxu+rpY0G4srIaDzXww4uOTkBIBFWn3TVI4AZAGm0/APlZZeCrhwIIkImYc8ab69zeqikyaMXRK0XMAD/8Fz9b+rUR342hMjFR+epZnNmWQpFtQLvB/SxlCZIZ+u1k2WLJYa7CChDePmdXNHgutvt1mQxLMpJmeDNjD2aOzF9+DPIqsOEkJ9RLJ8F0kQXnn9W02Av/a3GMVC7A/u/kxnKo3LRfkkkAAYkCKug=="</span>
<span class="nv">$public_key_pem</span> <span class="o">=</span> <span class="nb">openssl_pkey_get_public</span><span class="p">(</span><span class="nv">$path_to_public_spectro_coin_key</span><span class="p">);</span>
<span class="nv">$responseDecodedSign</span> <span class="o">=</span> <span class="nb">base64_decode</span><span class="p">(</span><span class="nv">$encodedSignature</span><span class="p">);</span>
<span class="nv">$validity</span> <span class="o">=</span> <span class="nb">openssl_verify</span><span class="p">(</span><span class="nv">$data</span><span class="p">,</span> <span class="nv">$responseDecodedSign</span><span class="p">,</span> <span class="nv">$public_key_pem</span><span class="p">,</span> <span class="nx">OPENSSL_ALGO_SHA1</span><span class="p">);</span>
</pre></div>

<h1>
<a name="example-applications" class="anchor" href="#example-applications"><span class="octicon octicon-link"></span></a>Example applications</h1>

<p>There are made several sample SpectroCoin merchant API client applications. You should adapt them for your needs.</p>

<h2>
<a name="java" class="anchor" href="#java"><span class="octicon octicon-link"></span></a>Java</h2>

<p>Sample Java application could be found <a href="https://github.com/SpectroFinance/SpectroCoin-Merchant-Java">here</a>.</p>

<h2>
<a name="php" class="anchor" href="#php"><span class="octicon octicon-link"></span></a>PHP</h2>

<p>Sample PHP application could be found <a href="https://github.com/SpectroFinance/SpectroCoin-Merchant-PHP">here</a>.</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Spectro Coin Merchant API maintained by <a href="https://github.com/SpectroFinance">SpectroFinance</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-51179757-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>


  </body>
</html>
